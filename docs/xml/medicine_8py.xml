<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.10.0" xml:lang="en-US">
  <compounddef id="medicine_8py" kind="file" language="Python">
    <compoundname>medicine.py</compoundname>
    <innerclass refid="classapi_1_1views_1_1medicine_1_1MedicineView" prot="public">api::views::medicine::MedicineView</innerclass>
    <innerclass refid="classapi_1_1views_1_1medicine_1_1APIDetailView" prot="public">api::views::medicine::APIDetailView</innerclass>
    <innernamespace refid="namespaceapi">api</innernamespace>
    <innernamespace refid="namespaceapi_1_1views">api::views</innernamespace>
    <innernamespace refid="namespaceapi_1_1views_1_1medicine">api::views::medicine</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespaceapi_1_1views_1_1medicine" refkind="compound"><highlight class="keyword">from</highlight><highlight class="normal"><sp/>django.core.exceptions<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>ObjectDoesNotExist,<sp/>FieldError</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>django.http<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>JsonResponse,<sp/>HttpRequest</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacemedicines_1_1models" kindref="compound">medicines.models</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Medicine</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>django.views.decorators.csrf<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>csrf_exempt</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>django.utils.decorators<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>method_decorator</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>django.views.generic<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>View</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacemedicines_1_1forms" kindref="compound">medicines.forms</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>CreateForm</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="comment">#<sp/>API<sp/>Version<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11" refid="classapi_1_1views_1_1medicine_1_1MedicineView" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classapi_1_1views_1_1medicine_1_1MedicineView" kindref="compound">MedicineView</ref>(View):</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@classmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13" refid="classapi_1_1views_1_1medicine_1_1MedicineView_1a246b3300c14ea5fc459ab4a06dec1ad1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classapi_1_1views_1_1medicine_1_1MedicineView_1a246b3300c14ea5fc459ab4a06dec1ad1" kindref="member">get_queryset</ref>(cls,<sp/>filters=None):</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>It&apos;s<sp/>better<sp/>to<sp/>use<sp/>this<sp/>method<sp/>separately,<sp/>as<sp/>we<sp/>might<sp/>want<sp/>to<sp/>do<sp/>another<sp/>queries,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>or<sp/>may<sp/>need<sp/>to<sp/>order<sp/>the<sp/>data,<sp/>or<sp/>may<sp/>need<sp/>to<sp/>sort<sp/>the<sp/>data,<sp/>all<sp/>of<sp/>this<sp/>will<sp/>be</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>handled<sp/>in<sp/>this<sp/>method</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="18"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Expected<sp/>keys:</highlight></codeline>
<codeline lineno="19"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>owner<sp/>|<sp/>category<sp/>|<sp/>price__lt<sp/>|<sp/>price__gt<sp/>|<sp/>quantity__gt<sp/>|<sp/>quantity__lt</highlight></codeline>
<codeline lineno="20"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m<sp/>=<sp/>Medicine.objects.all()</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>key,<sp/>value<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>filters.items():</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>key<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;owner&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m<sp/>=<sp/>m.filter(owner__sellerprofile__store_name=value)</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>key<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;category&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m<sp/>=<sp/>m.filter(category__name=value)</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m<sp/>=<sp/>m.filter(key=value)</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>(FieldError,<sp/>ValueError):</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>m</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="classapi_1_1views_1_1medicine_1_1MedicineView_1a6a92fa916b3ccf8671ec552755883093" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classapi_1_1views_1_1medicine_1_1MedicineView_1a6a92fa916b3ccf8671ec552755883093" kindref="member">get</ref>(self,<sp/>request:<sp/>HttpRequest,<sp/>*args,<sp/>**kwargs)<sp/>-&gt;<sp/>JsonResponse:</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="36"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GET<sp/>the<sp/>medicines<sp/>list</highlight></codeline>
<codeline lineno="37"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>request:<sp/>request<sp/>to<sp/>get<sp/>the<sp/>list<sp/>as<sp/>json</highlight></codeline>
<codeline lineno="38"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:type<sp/>request:<sp/>HttpRequest</highlight></codeline>
<codeline lineno="39"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:return:<sp/>List<sp/>containing<sp/>basic<sp/>medicine<sp/>data</highlight></codeline>
<codeline lineno="40"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:rtype:<sp/>JsonResponse</highlight></codeline>
<codeline lineno="41"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qs<sp/>=<sp/>self.<ref refid="classapi_1_1views_1_1medicine_1_1MedicineView_1a246b3300c14ea5fc459ab4a06dec1ad1" kindref="member">get_queryset</ref>(request.GET)</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>json<sp/>=<sp/>{med.id:<sp/>{</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">:<sp/>med.name,</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;price&apos;</highlight><highlight class="normal">:<sp/>med.price,</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;category&apos;</highlight><highlight class="normal">:<sp/>med.category.name</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>med<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>qs}</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>JsonResponse(json)</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51" refid="classapi_1_1views_1_1medicine_1_1MedicineView_1ac7019401ebaeb9316fc2180e144163e6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classapi_1_1views_1_1medicine_1_1MedicineView_1ac7019401ebaeb9316fc2180e144163e6" kindref="member">post</ref>(self,<sp/>request:<sp/>HttpRequest)<sp/>-&gt;<sp/>JsonResponse:</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="53"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Create<sp/>a<sp/>medicine<sp/>using<sp/>formData</highlight></codeline>
<codeline lineno="54"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="55"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>request:<sp/>request<sp/>with<sp/>the<sp/>new<sp/>medicine<sp/>data</highlight></codeline>
<codeline lineno="56"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:type<sp/>request:<sp/>HttpRequest</highlight></codeline>
<codeline lineno="57"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:return:<sp/>Respond<sp/>if<sp/>the<sp/>query<sp/>was<sp/>successful</highlight></codeline>
<codeline lineno="58"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:rtype:<sp/>JsonResponse</highlight></codeline>
<codeline lineno="59"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.request.user.has_perm(</highlight><highlight class="stringliteral">&apos;medicines.add_medicine&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>JsonResponse({</highlight><highlight class="stringliteral">&apos;msg&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&quot;You<sp/>don&apos;t<sp/>have<sp/>permission<sp/>to<sp/>update<sp/>medicines&quot;</highlight><highlight class="normal">},<sp/>status=400)</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Same<sp/>process<sp/>as<sp/>the<sp/>MedCreateView,<sp/>but<sp/>with<sp/>customization<sp/>for<sp/>the<sp/>JSON<sp/>response</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>form<sp/>=<sp/><ref refid="classmedicines_1_1forms_1_1CreateForm" kindref="compound">CreateForm</ref>(request.POST,<sp/>request.FILES<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>form.is_valid():</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>JsonResponse({</highlight><highlight class="stringliteral">&apos;msg&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;This<sp/>form<sp/>has<sp/>invalid<sp/>data&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;errors&apos;</highlight><highlight class="normal">:<sp/>form.errors},<sp/>status=200)</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>if<sp/>this<sp/>request<sp/>is<sp/>duplicated</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>=<sp/>Medicine.objects.filter(name=form.data[</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">],<sp/>owner=self.request.user)</highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>temp:</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>JsonResponse({</highlight><highlight class="stringliteral">&apos;msg&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;No<sp/>two<sp/>medicines<sp/>by<sp/>the<sp/>same<sp/>owner<sp/>can<sp/>have<sp/>the<sp/>same&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">},<sp/>status=400)</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>med<sp/>=<sp/>form.save(commit=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>med.owner<sp/>=<sp/>self.request.user</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>med.save()</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>JsonResponse({</highlight><highlight class="stringliteral">&apos;msg&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;created&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;newID&apos;</highlight><highlight class="normal">:<sp/>med.id},<sp/>status=201)</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@method_decorator(csrf_exempt)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82" refid="classapi_1_1views_1_1medicine_1_1MedicineView_1a9fff1de2e37060cfc495d930765b54ec" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classapi_1_1views_1_1medicine_1_1MedicineView_1a9fff1de2e37060cfc495d930765b54ec" kindref="member">dispatch</ref>(self,<sp/>request,<sp/>*args,<sp/>**kwargs):</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Just<sp/>to<sp/>turn<sp/>off<sp/>the<sp/>csrf<sp/>verification<sp/>for<sp/>this<sp/>view<sp/>only...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>In<sp/>future,<sp/>another<sp/>(<sp/>process<sp/>|<sp/>algorithm<sp/>|<sp/>method<sp/>)<sp/>must<sp/>be<sp/>incorporated<sp/>without<sp/>blocking</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>the<sp/>CSRF</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>super().<ref refid="classapi_1_1views_1_1medicine_1_1MedicineView_1a9fff1de2e37060cfc495d930765b54ec" kindref="member">dispatch</ref>(request,<sp/>*args,<sp/>**kwargs)</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89" refid="classapi_1_1views_1_1medicine_1_1APIDetailView" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classapi_1_1views_1_1medicine_1_1APIDetailView" kindref="compound">APIDetailView</ref>(View):</highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="91" refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1ad2d843403ae7eaef6296ab196ef9c174" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1ad2d843403ae7eaef6296ab196ef9c174" kindref="member">__init__</ref>(self,<sp/>*args,<sp/>**kwargs):</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super().<ref refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1ad2d843403ae7eaef6296ab196ef9c174" kindref="member">__init__</ref>(*args,<sp/>**kwargs)</highlight></codeline>
<codeline lineno="93" refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1ad2e4bf09a75526d5a744e554e2e59210" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1ad2e4bf09a75526d5a744e554e2e59210" kindref="member">user</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@classmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96" refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1a5c6e188a766e83ebcb9e50a71b0c34ff" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1a5c6e188a766e83ebcb9e50a71b0c34ff" kindref="member">get_med</ref>(cls,<sp/>pk=None,<sp/>slug=None):</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>pk<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>med:<sp/>Medicine<sp/>=<sp/>Medicine.objects.get(id=pk)</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>med:<sp/>Medicine<sp/>=<sp/>Medicine.objects.get(slug__exact=slug)</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>med</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103" refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1aa978b0f9744a9530dd83c473bc21cff6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1aa978b0f9744a9530dd83c473bc21cff6" kindref="member">get</ref>(self,<sp/>request,<sp/>pk=None,<sp/>slug=None):</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>med<sp/>=<sp/>self.<ref refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1a5c6e188a766e83ebcb9e50a71b0c34ff" kindref="member">get_med</ref>(pk=pk,<sp/>slug=slug)</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>JsonResponse(med.as_json)</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>ObjectDoesNotExist:</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>JsonResponse({</highlight><highlight class="stringliteral">&apos;msg&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;Medicine<sp/>not<sp/>found&apos;</highlight><highlight class="normal">},<sp/>status=404)</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110" refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1a92cc172431e928128789c50d0ef533cd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1a92cc172431e928128789c50d0ef533cd" kindref="member">post</ref>(self,<sp/>request,<sp/>pk=None,<sp/>slug=None):</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>med:<sp/>Medicine<sp/>=<sp/>self.<ref refid="classapi_1_1views_1_1medicine_1_1APIDetailView_1a5c6e188a766e83ebcb9e50a71b0c34ff" kindref="member">get_med</ref>(pk=pk,<sp/>slug=slug)</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f<sp/>=<sp/><ref refid="classmedicines_1_1forms_1_1CreateForm" kindref="compound">CreateForm</ref>(request.POST<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>request.FILES<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>instance=med)</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>f.is_valid():</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f.save()</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>JsonResponse({</highlight><highlight class="stringliteral">&apos;msg&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;Got<sp/>it&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">:<sp/>med.name})</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>JsonResponse({</highlight><highlight class="stringliteral">&apos;msg&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&quot;No,<sp/>you<sp/>can&apos;t<sp/>fool<sp/>me&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;errors&apos;</highlight><highlight class="normal">:<sp/>f.errors})</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>ObjectDoesNotExist:</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>JsonResponse({</highlight><highlight class="stringliteral">&apos;msg&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&quot;Are<sp/>you<sp/>kidding<sp/>me?,<sp/>that<sp/>medicine<sp/>doesn&apos;t<sp/>exists<sp/>at<sp/>all&quot;</highlight><highlight class="normal">},</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>status=404)</highlight></codeline>
    </programlisting>
    <location file="/tmp/github_repos_arch_doc_gen/mukeshgurpude/medstore/api/views/medicine.py"/>
  </compounddef>
</doxygen>
