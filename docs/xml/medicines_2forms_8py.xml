<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.10.0" xml:lang="en-US">
  <compounddef id="medicines_2forms_8py" kind="file" language="Python">
    <compoundname>forms.py</compoundname>
    <innerclass refid="classmedicines_1_1forms_1_1CreateForm" prot="public">medicines::forms::CreateForm</innerclass>
    <innerclass refid="classmedicines_1_1forms_1_1CreateForm_1_1Meta" prot="public">medicines::forms::CreateForm::Meta</innerclass>
    <innernamespace refid="namespacemedicines">medicines</innernamespace>
    <innernamespace refid="namespacemedicines_1_1forms">medicines::forms</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacemedicines_1_1forms" refkind="compound"><highlight class="keyword">from</highlight><highlight class="normal"><sp/>django<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>forms</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>.models<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Medicine</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>django.core.files.uploadedfile<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>InMemoryUploadedFile</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>.humanize<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>naturalsize</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7" refid="classmedicines_1_1forms_1_1CreateForm" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classmedicines_1_1forms_1_1CreateForm" kindref="compound">CreateForm</ref>(forms.ModelForm):</highlight></codeline>
<codeline lineno="8" refid="classmedicines_1_1forms_1_1CreateForm_1abbe53aa419d78e5573936d605dde60b8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>max_upload_limit<sp/>=<sp/>2<sp/>*<sp/>1024<sp/>*<sp/>1024<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>refers<sp/>to<sp/>2MB</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9" refid="classmedicines_1_1forms_1_1CreateForm_1aa9c1e227ec9ae35dea85a52c15c2a6f9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>max_upload_limit_text<sp/>=<sp/>naturalsize(max_upload_limit)</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Call<sp/>this<sp/>&apos;picture&apos;<sp/>so<sp/>it<sp/>gets<sp/>copied<sp/>from<sp/>the<sp/>form<sp/>to<sp/>the<sp/>in-memory<sp/>model</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>It<sp/>will<sp/>not<sp/>be<sp/>the<sp/>&quot;bytes&quot;,<sp/>it<sp/>will<sp/>be<sp/>the<sp/>&quot;InMemoryUploadedFile&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>because<sp/>we<sp/>need<sp/>to<sp/>pull<sp/>out<sp/>things<sp/>like<sp/>content_type</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14" refid="classmedicines_1_1forms_1_1CreateForm_1a43e189cd05c4e6d47768d79ddf65b7f9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>thumbnail<sp/>=<sp/>forms.FileField(required=</highlight><highlight class="keyword">False</highlight><highlight class="normal">,<sp/>label=</highlight><highlight class="stringliteral">&apos;Thumbnail<sp/>to<sp/>Upload<sp/>&lt;=<sp/>&apos;</highlight><highlight class="normal"><sp/>+<sp/>max_upload_limit_text)</highlight></codeline>
<codeline lineno="15" refid="classmedicines_1_1forms_1_1CreateForm_1ace75aa6d7c445e3f0f07666f7245d6c8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>upload_field_name<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;picture&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17" refid="classmedicines_1_1forms_1_1CreateForm_1_1Meta" refkind="compound"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classmedicines_1_1forms_1_1CreateForm_1_1Meta" kindref="compound">Meta</ref>:</highlight></codeline>
<codeline lineno="18" refid="classmedicines_1_1forms_1_1CreateForm_1_1Meta_1a1e8fc590a9f34d00c8556dcb92a5f8df" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>model<sp/>=<sp/>Medicine</highlight></codeline>
<codeline lineno="19" refid="classmedicines_1_1forms_1_1CreateForm_1_1Meta_1a3346c40ca019b49bbd1aca6764beb0bb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fields<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;category&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;description&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;thumbnail&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;quantity&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;price&apos;</highlight><highlight class="normal">]<sp/><sp/></highlight><highlight class="comment">#<sp/>thumbnail<sp/>is<sp/>manual</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Validate<sp/>the<sp/>size<sp/>of<sp/>the<sp/>picture</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22" refid="classmedicines_1_1forms_1_1CreateForm_1a06333ec80ec1981fdb048c0cc425627c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classmedicines_1_1forms_1_1CreateForm_1a06333ec80ec1981fdb048c0cc425627c" kindref="member">clean</ref>(self):</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cleaned_data<sp/>=<sp/>super().<ref refid="classmedicines_1_1forms_1_1CreateForm_1a06333ec80ec1981fdb048c0cc425627c" kindref="member">clean</ref>()</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pic<sp/>=<sp/>cleaned_data.get(</highlight><highlight class="stringliteral">&apos;thumbnail&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>pic:</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(pic)<sp/>&gt;<sp/>self.<ref refid="classmedicines_1_1forms_1_1CreateForm_1abbe53aa419d78e5573936d605dde60b8" kindref="member">max_upload_limit</ref>:</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.add_error(</highlight><highlight class="stringliteral">&apos;thumbnail&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;File<sp/>must<sp/>be<sp/>&lt;<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/>self.<ref refid="classmedicines_1_1forms_1_1CreateForm_1aa9c1e227ec9ae35dea85a52c15c2a6f9" kindref="member">max_upload_limit_text</ref><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;<sp/>bytes&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Convert<sp/>uploaded<sp/>File<sp/>object<sp/>to<sp/>a<sp/>picture</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31" refid="classmedicines_1_1forms_1_1CreateForm_1aa12f63c5541574a47d4e23b30c78be14" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classmedicines_1_1forms_1_1CreateForm_1aa12f63c5541574a47d4e23b30c78be14" kindref="member">save</ref>(self,<sp/>commit=True):</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>instance<sp/>=<sp/>super(CreateForm,<sp/>self).<ref refid="classmedicines_1_1forms_1_1CreateForm_1aa12f63c5541574a47d4e23b30c78be14" kindref="member">save</ref>(commit=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>We<sp/>only<sp/>need<sp/>to<sp/>adjust<sp/>picture<sp/>if<sp/>it<sp/>is<sp/>a<sp/>freshly<sp/>uploaded<sp/>file</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f<sp/>=<sp/>instance.thumbnail<sp/><sp/></highlight><highlight class="comment">#<sp/>Make<sp/>a<sp/>copy</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(f,<sp/>InMemoryUploadedFile):<sp/><sp/></highlight><highlight class="comment">#<sp/>Extract<sp/>data<sp/>from<sp/>the<sp/>form<sp/>to<sp/>the<sp/>model</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bytearr<sp/>=<sp/>f.read()</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>instance.content_type<sp/>=<sp/>f.content_type</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>instance.thumbnail<sp/>=<sp/>bytearr<sp/><sp/></highlight><highlight class="comment">#<sp/>Overwrite<sp/>with<sp/>the<sp/>actual<sp/>image<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>commit:</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>instance.save()</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>instance</highlight></codeline>
    </programlisting>
    <location file="/tmp/github_repos_arch_doc_gen/mukeshgurpude/medstore/medicines/forms.py"/>
  </compounddef>
</doxygen>
